version: "3.8"

services:
  mongo:
    image: mongo
    restart: always
    volumes:
      - ../../dev_volumes/database:/data/db
  backend:
    image: node:16.14.2
    working_dir: /opt/app
    volumes:
      - ../../images/backend:/opt/app
      - ../../images/backend/node_modules:/opt/app/node_modules
      - ../../images/backend/dist:/opt/app/dist
      - ../../dev_volumes/files:/opt/app/files
    command: bash -c "npm i --quiet --ignore-scripts && npm run start:dev"
    ports:
      - '8082:80'
